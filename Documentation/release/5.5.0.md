ParaView 5.5.0 Release Notes
============================

Changes made since ParaView 5.4.1 include the following:

# Bug Fixes

## Connectivity filter runs correctly in parallel

The Connectivity filter has been updated to run correctly in parallel. It
continues to work in serial as well.

## XML File Formats now read and write vtkBitArray fields correctly.

# Rendering Enhancements

## Support for rendering lines as tubes and points as spheres

Using **Render Lines As Tubes** and **Render Points As Spheres** properties in the
**Display** section on the **Properties Panel**, it's now possible to render lines as 3D tubes
and points as 3D spheres.

## Improvements to Eye Dome Lighting with remote rendering.

* A number of bugfixes went into the Eye Dome Lighting and IceT layers
  to allow this screen-space ambient occlusion algorithm to work on
  parallel/remote render servers.

## Embossing plugin

This plugin adds three new representations.
* BumpMap : computes on the GPU fake normals based on the gradient
of the selected point data create a relief effect.
* Extrusion (cell mode) : computes on the GPU an extrusion based on
the value on the cell.
* Extrusion (point mode) : computes on the GPU a height field based
on the value on the cell.

## Categorical Coloration

Categorical Coloration have been improved
 * Annotation now always have a color, using a default and by looping when adding annotation after the size of the color map
 * Automatic annotation generation can now be forced over its previous maximum (32)
 * The Color Legend is now hidden automatically when the number of annotations is bigger than 32.
 * Opacity can now be set globally, on selected category or on individual category
 * Tests have been added

## Depth Peeling For Volumes

This option is now exposed through settings. Enabling it will include
volumes in the depth-peeling pass to correctly render intermixed volumes
with translucent polygons.

## Glyphs Representation Culling

It is now possible to enable Glyphs representation culling and level of details.
This allows to render a higher number of glyphs at interactive rate.
When the option is enabled, instances that are not visible are discarded and not drawn.
One can also specify LODs parameters inside a table, the first column is the distance after which
the LOD is enabled, the second column is the reduction factor applied to the instance geometry.
It is also possible to display instances in different colors depending on the LOD.
Please note that this feature works only with OpenGL driver >= 4.0.

## Horizontal color legend title in vertical orientation mode

As in earlier versions of ParaView, it is now again possible to orient the
color legend title horizontally when the color legend is oriented vertically.
By default, the title is rotated 90 degrees counterclockwise and aligned with
the color legend vertically.

## Expose properties in the ImageVolumeRepresentation to render iso-contours

Thanks to a recent change in VTK, it is now possible to use the OpenGL based
volume rendering mapper to display iso-contours without computing them on the
CPU. This feature is exposed through two new properties on the image volume
representation: "Show IsoSurfaces" to enable the feature, and "Contour Values"
to specify the isosurfaces values similarely to what the "Contour" filter offers.

# New Features

## Adding filters from the Pipeline Browser context menu

It is now possible to create new filters from the Pipeline Browser
context menu. Only filters that are applicable to the active source
are shown in the context menu.

## Saved custom camera positions

**Adjust Camera** dialog now allows users to save more than 4 camera positions. The limit has been extended to 30 positions, with a minimum of 4. Users can add/remove positions within this limit using the **Adjust Camera** dialog's **Configure...** button.

## Proxy sources selection order is now respected

So far the order of selection of the proxies in the pipeline was not resepected.
For instance, selecting a box first and then a sphere in the pipeline before
applying a Groupe DataSets filter did not ensure that block 0 will be the box.
Selection order is now respected - note that order was already respected when
using the Change Inputs dialog.

## Introduce a new plugin called DigitalRockPhysics for rock analysis

This plugin introduces two new filters to help the analysis of digital rock.

Material Cluster Analysis filter produces a multiblock dataset that contains
two blocks:
i/ a table (block 2) that contains the volume (number of cells of every cluster)
and barycenter of every cluster (set of connected cells that have the same point
data material attribute) ;
i/ a copy of the input data image (block 1) with new point data arrays that
correspond to the volume and barycenter of the material cluster it belongs to.

Material Cluster Explode filter creates an exploded surface mesh of the clusters
(set of connected cells that have the same material attribute) described in the
input image data.

## Expose vtkMolecule type for Programmable Source & Filter.

We add support for vtkMolecule as input/output data type in Python programmable
source and filter.
Molecule type is now also exposed correctly in the Information panel.

## AMReX particles reader

ParaView now supports reading particle data from AMReX plotfiles. The reader
supports both single plotfile or multiple plotfiles that form a time-series.

## Json based new meta file format for series added

vtkFileSeriesReader now supports a new meta file format based
on Json. This format has support for specifying time values.
The format (currently version 1.0) looks like the following

```json
{
"file-series-version" : "1.0",
"files" : [
{ "name" : "foo1.vtk", "time" : 0 },
{ "name" : "foo2.vtk", "time" : 5.5 },
{ "name" : "foo3.vtk", "time" : 11.2 }]
}
```

The reader will interpret any files that end with the .series
extension as a meta file. To add support for the meta file for
a reader in the readers description, add the extension.series
extension to the extension list. For example, for legacy VTK
files, the reader now supports .vtk and .vtk.series extensions.

## Glyph3D quaternion selection

When Glyph3D representation is selected, one can use a data array to define the orientation of the glyphs.
So far, one had choice between direction vector or angles around three axes (both by selecting a 3-components array).
We added a new "Quaternion" mode to specify the orientation through a 4-components point array with quaternions defined in WXYZ format.

## Plotting full dataset over time

A newly added filter **Plot Data Over Time** supports plotting entire datasets,
and not just the selected subset. When in distributed mode, however, the current
implementation show stats for each rank separately. This will be fixed in a future
release to correctly compute distributed statistical summaries.

## Selecting arrays to read in PVD reader

PVD reader (`vtkPVDReader`) now supports selecting which arrays to read.
This can be useful to minimize memory foot print and reduce I/O times when reading PVD files
by skipping arrays that may not be needed.

## Restore user preferences

ParaView now supports restoring user preferences from the Edit menu. One can
optionally generate backup files before restoring user preferences to default.

## Format specific options in save animation and screenshot dialogs

Dialogs for save-screenshot and save-animation now show file-format
specific options for quality, compression, etc. rather than a single **Image Quality**
parameter which was internally interpreted differently for each file format.
This allows the user finer controls based on the file format, in addition to avoiding
confusion.

## Support of TrueType font files

It is now possible display 2D/3D text with user provided TrueType font files,
and thus use different fonts than the built-in ones (Arial, Courier & Times).
This feature is accessible by choosing `FontFile` as font family in the GUI
and then specify the full path to the `.ttf` file in the font file path field.

## Remove vtkHyperOctree and all support class.

All functionality related to vtkHyperOctree has been deprecated in VTK
and removed from ParaView. Use the new HyperTreeGrid utilities instead.

# Catalyst

## Created a Catalyst volume rendering edition.

We added a Catalyst volume rendering edition.

# Build and Installation Notes

## Installation tree cleanup

On Unix, ParaView no longer installs its libraries under
`<prefix>/lib/paraview-${paraview-version}`. Instead, it follows the standard practice of
installing them under `<prefix>/lib` directly.

Python packages built by ParaView are now built and installed under
`<prefix>/lib/python-$<python-version>/site-packages` on \*nixes, and
`<prefix>/bin/Lib/site-packages` on Windows. This is consistent with how
Python installs its packages on the two platforms. In macOS app bundle, the location
in unchanged i.e. `<app>/Contents/Python`.

## Plugins build and installation tree cleanup

Plugins are built and installed in self contained directories named same as the
plugin under `PARAVIEW_BUILD_PLUGINS_DIR` and `PARAVIEW_INSTALL_PLUGINS_DIR`.
These are set to `lib/paraview-${paraview-version}/plugins` (`bin/plugins` on Windows)
by default. For macOS app bundles too, while the plugins are installed under
`<app>/Contents/Plugins`, they are now contained in a separate directory per
plugin.

The `.plugins` file has also been moved to `PARAVIEW_BUILD_PLUGINS_DIR` and
`PARAVIEW_INSTALL_PLUGINS_DIR` for builds and installs respectively.

# Developer Notes

## Easier array selection properties

`vtkSIDataArraySelectionProperty` makes it easier to expose array selection properties for
filter/readers that support an API to toggle selection status using vtkDataArraySelection instance.
See `vtkSIDataArraySelectionProperty` docs for details.

## promote coprocessing plugin's writers and generator to catalyst menu

We removed the CoProcessingScriptGenerator plugin and promoted
its functions to mainline ParaView. As before they depend on
Python and Qt, but otherwise they are now always available.
With this we removed the plugin's two menus and moved their
contents under the Catalyst menu.

## client-server-wrapping-property

The `ClientServer` wrapping tool now uses the `WRAP_EXCLUDE_PYTHON` property
rather than `WRAP_EXCLUDE`. It also now properly skips classes which cannot
be wrapped with no-op wrappings (rather than failing as before). One
limitation currently is that files with no classes still need excluded since
the wrapper does not know what name to use when creating the no-op function.

## `info` attribute for EnumerationDomain

EnumerationDomain now supports `info` attribute for each of the entries.
If present, the UI will show that text in the combo-box rendered for
the domain to provide the user with additional tips for the items to choose.

## jsoncpp-1.8.4


* There was a recent API change in jsoncpp-1.8.4, which changed all
  `removeMember()` methods of `Json::Value` to either return `bool`
  or being `void` type. The now used overloaded `removeMember()`
  method is available since jsoncpp-0.8.0 and returns the removed
  value in a pre-allocated buffer instead of returning a new created
  `Json::Value` object. The underlying semantics of the lifetime and
  memory allocation of the used buffer are kept the same way as before.


## Adding QToolBar via plugins

ParaView now supports add a QToolBar subclass via the plugin mechanism. In the past, one had to add
actions to a toolbar via a QActionGroup. Now, directly adding a QToolBar is a supported by using
`add_paraview_toolbar` CMake function.

## vtkencodestring-deprecation

* The `vtkEncodeString` tool has been deprecated in favor of the
  `vtkEncodeString` CMake module and its `vtk_encode_string` function.

## New proxy hint `WarnOnCreate`

Sources and filters XML now supports an ability to add a warning or
information message for the user to be shown when creating the source
or filter. See `WarnOnCreate` hint for details.
