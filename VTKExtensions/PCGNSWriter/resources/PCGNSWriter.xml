<ServerManagerConfiguration>
  <ProxyGroup name="writers">
    <!-- PCGNSWriter todo: use PWriterProxy etc. just like other parallel writers, see writers.xml -->
    <PWriterProxy name="PCGNSWriter"
                 class="vtkPCGNSWriter"
                 label="PCGNS Writer"
                 parallel_only="1"
                 base_proxygroup="internal_writers">
      <Documentation short_help="Write a dataset in CGNS format."
                     long_help="Write files stored in CGNS format.">
        The CGNS writer writes files stored in CGNS format.
        The file extension is .cgns. The input of this reader is
        a structured grid, polygon data, unstructured grid or a multi-block
        dataset containing these data types.
      </Documentation>

      <InputProperty command="SetInputConnection"
                     name="Input" >

        <DataTypeDomain composite_data_supported="1"
                        name="input_type">
          <DataType value="vtkCompositeDataSet" />
          <DataType value="vtkDataSet" />
        </DataTypeDomain>
        <Documentation>The input filter/source whose output dataset is to
        written to the file.</Documentation>
      </InputProperty>
      <StringVectorProperty name="FileName"
                            command="SetFileName"
                            number_of_elements="1">
        <Documentation>
          The name of the file to be written.
        </Documentation>
      </StringVectorProperty>
      <IntVectorProperty command="SetUseHDF5"
                         number_of_elements="1"
                         name="UseHDF5"
                         default_values="1">
        <BooleanDomain name="bool" />
        <Documentation>When UseHDF5 is turned ON, the CGNS file will use HDF5 as
        the underlying file format. When turned OFF, the file will use ADF as the
        underlying file format. HDF5 is preferred and default.
        </Documentation>
      </IntVectorProperty>

      <!-- End of PCGNSWriter -->
    </PWriterProxy>
  </ProxyGroup>

  <!-- Catalyst client only proxies, used to generate a coprocessing script
       and to modify writer filename and frequency through ParaView Live
  -->
  <!-- ================================================================= -->
  <ProxyGroup name="insitu_writer_parameters">
    <SourceProxy name="PCGNSWriter" class="vtkPVNullSource"
      label="Parallel CGNS Writer">
      <InputProperty name="Input">
        <ProxyGroupDomain name="groups">
          <Group name="sources" />
          <Group name="filters" />
        </ProxyGroupDomain>
        <DataTypeDomain name="input_type">
          <DataType value="vtkCompositeDataSet"/>
          <DataType value="vtkDataSet" />
        </DataTypeDomain>
        <Documentation>The input.</Documentation>
      </InputProperty>

      <StringVectorProperty name="FileName"
        number_of_elements="1"
        default_values="filename_%t.vtm">
     </StringVectorProperty>

      <IntVectorProperty name="WriteFrequency"
        number_of_elements="1"
        default_values="1">
        <IntRangeDomain name="range" min="1" />
      </IntVectorProperty>

      <IntVectorProperty name="PaddingAmount"
        number_of_elements="1"
        default_values="0">
      <IntRangeDomain name="range" min="0" />
      </IntVectorProperty>

     <Hints>
      <!-- TODO: this doesn't work yet -->
      <PipelineIcon name=":pqComponents/pqSave32.png" />

      <!-- This will help us when exporting the script state -->
      <WriterProxy group="writers" name="CGNSWriter" />
     </Hints>
    </SourceProxy>
  </ProxyGroup>
</ServerManagerConfiguration>
